<div style="padding-top: 3%">
  <form class="form-inline" data-toggle="tooltip" title="Entrer la  reference de l'echelle" >
    <input class="form-control ml-3 col-lg-3" type="search" name="searchInput" placeholder="Entrer la  reference de l'echelle" aria-label="Search"  (keyup)="search()" [(ngModel)]="searchInput">
    <button class="btn btn-outline-success ml-2 my-sm-0" type="submit" (click)="search()">Chercher</button>
    <button class="btn btn-outline-primary ml-2" type="submit" (click)="getAll()">Afficher tout</button>
  </form>
  <br>
  <table class="table table-striped">
    <thead>
    <tr>
      <th scope="col">référence</th>
      <th scope="col">Ordre</th>
      <th scope="col">Libelle</th>
      <th scope="col">Description</th>
      <th scope="col">Liste des echelons</th>
      <th scope="col">Reference Type personnel</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let echelle of echelles">
      <td>{{echelle.reference}}</td>
      <td>{{echelle.ordre}}</td>
      <td>{{echelle.libelle}}</td>
      <td>{{echelle.description}}</td>
      <td>
        <button type="button" class="btn btn-outline-primary" (click)="afficherListeEchelons(echelle.echelons)">
          Afficher
        </button>
      </td>
      <td>{{echelle.referenceTypePersonnel}}</td>
      <td>
        <button type="button" class="btn btn-outline-warning" (click)="echelleEdit(echelle)">Modifier</button>
      </td>
      <td>
        <button type="button" class="btn btn-outline-danger" (click)="supprimerEchelle(echelle.reference)">Supprimer</button>
      </td>
    </tr>
    </tbody>
  </table>

  <!--Modal for Echelons list-->
  <div class="modal fade" id="modalListeEchelons" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
       aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <table class="table table-striped">
            <thead>
            <tr>
              <th scope="col">Reference</th>
              <th scope="col">Ordre</th>
              <th scope="col">Libelle</th>
            </tr>
            </thead>
            <tbody *ngIf="selected != null">
            <tr *ngFor="let echelon of selected">
              <th>{{echelon.reference}}</th>
              <td>{{echelon.ordre}}</td>
              <td>{{echelon.libelle}}</td>
            </tr>
            </tbody>
            <tbody *ngIf="selected == null">
            <tr>
              <td>Cet echelle ne contient aucun echelon</td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outiline-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for editing an echelle-->
  <div class="modal fade" id="modalEditEchelle" tabindex="-1" role="dialog"
       aria-labelledby="exampleModalScrollableTitle"
       aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
      <div class="modal-content">

        <div class="modal-body">
          <form>
            <div class="form-group">
              <div class="form-row">
                <div class="col">
                  <div class="input-group mb-2" data-toggle="tooltip" title="Entrer la refrence de l'echelle">
                    <div class="input-group-prepend">
                      <div class="input-group-text">Reference</div>
                    </div>
                    <input type="text" class="form-control" id="reference" name="reference" placeholder="Reference"
                           [(ngModel)]="echelleToEdit.reference">
                  </div>
                </div>
                <div class="col">
                  <div class="input-group mb-2" data-toggle="tooltip" title="Entrer l'ordre de l'echelle">
                    <div class="input-group-prepend">
                      <div class="input-group-text">Ordre</div>
                    </div>
                    <input type="number" class="form-control" id="ordre" name="ordre" placeholder="Ordre"
                           [(ngModel)]="echelleToEdit.ordre">
                  </div>
                </div>
              </div>
              <br>
              <div class="input-group mb-2" data-toggle="tooltip" title="Entrer le libelle de l'echelle">
                <div class="input-group-prepend">
                  <div class="input-group-text">Libelle</div>
                </div>
                <input type="text" class="form-control" id="libelle" name="libelle" placeholder="Libelle"
                       [(ngModel)]="echelleToEdit.libelle">
              </div>
              <br>
              <div class="input-group mb-2" data-toggle="tooltip" title="Entrer la description de l'echelle">
                <div class="input-group-prepend">
                  <div class="input-group-text">Description</div>
                </div>
                <textarea class="form-control" id="description" name="description" placeholder="description"
                          [(ngModel)]="echelleToEdit.description"
                          rows="3"></textarea>
              </div>
              <br>
              <div class="input-group mb-2" data-toggle="tooltip"
                   title="Entrer la liste des echelons (utliser ctrl+click)">
                <div class="input-group-prepend">
                  <div class="input-group-text">Liste des echelons</div>
                </div>
                <select multiple class="form-control" id="echelons" name="echelons" [(ngModel)]="echelleToEdit.echelons">
                  <option *ngFor="let echelon of echelons" [value]="echelon">{{echelon.reference}} | {{echelon.ordre}}
                    | {{echelon.libelle}}</option>
                </select>
              </div>
              <br>
              <div class="input-group mb-2" data-toggle="tooltip" title="Entrer la reference du type personnel">
                <div class="input-group-prepend">
                  <div class="input-group-text">Reference Type personnel</div>
                </div>
                <select class="form-control" id="refrenceTypePersonnel" name="refrenceTypePersonnel"
                        [(ngModel)]="echelleToEdit.referenceTypePersonnel">
                  <option>TYPE - 1</option>
                  <option>TYPE - 2</option>
                  <option>TYPE - 3</option>
                  <option>TYPE - 4</option>
                  <option>TYPE - 5</option>
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Quitter</button>
          <button type="button" class="btn btn-outline-primary" (click)="modifierEchelle()">Sauvegarder</button>
        </div>
      </div>
    </div>
  </div>
</div>

